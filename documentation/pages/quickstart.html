<h1>10 minute quickstart</h1>

<h2>Prerequisites</h2>
<p>
  Angular-Wakanda relies mainly on node.js and gulp, so you have to install them on
  your computer.
  <ul>
    <li><a href="https://nodejs.org/en/download/" target="_blank">node.js download page</a></li>
    <li><code>npm install -g gulp</code></li>
  </ul>
  In this quickstart, we will focus on creating an Angular application with Wakanda Studio,
  but there are other ways to do it, you can refer to
  <a href="#/doc/developer-guide/bootstrap-app">Bootstrap an Angular-Wakanda app</a> guide
  to learn more.
</p>

<h2>Creating a solution</h2>
<p>
  In this quickstart, we will create a super-simple todo list with Angular-Wakanda.<br />
  First of all, create a new solution with Wakanda Studio and leave checked the box <em>Add a blank project
  to the new solution</em>.
  Then create an <code>Item</code> dataClass on the data model, located on <code>database/model</code>.
  When it is done, you can launch the solution by clicking on <em>Run Page</em>.
</p>

<div class="text-center">
  <img src="./images/documentation/quickstart/dataclass.png" />
</div>

<p>
  Our Angular application is located on <code>web/app</code> folder, on Solution Explorer on the
  left pane. Angular-Wakanda and AngularJS are already installed.
</p>

<div class="text-center">
  <img src="./images/documentation/quickstart/explorer.png" />
</div>

<h2>The <code>$wakandaManager</code> factory</h2>
<p>
  <code>$wakandaManager</code> is a factory to use Angular-Wakanda in an efficient way <strong>with
  a router</strong> like <code>ui-router</code> or <code>ngRoute</code>. It provides some
  helper methods, that returns promise, to be sure that some treatments are done,
  or some conditions met, <strong>before the route resolves.</strong>
</p>

<p>
  So, it allows you to prepare something to inject, like the dataStore, or to check
  for authentication logic at route (or state for <code>ui-router</code>) level.
</p>
<p>
  See the complete <a href="#/doc/api-reference/wakanda-manager">$wakandaManager factory
  API Reference</a> for more details and a complete documentation.
</p>
<p>
  You can use this factoruy in two different ways :
  <ul>
    <li>
      By directly injecting it on a component, putting your code on the callback called
      when <code>$wakandaManager</code> promise is resolved
    </li>
    <li>
      By letting your router resolving promises and injecting their result into
      controllers
    </li>
  </ul>
</p>

<pre><code class="language-javascript" prism>//Recommended - Injecting with resolve property of a route/state. Here with ui-router
app.config(function ($stateProvider) {
  $stateProvider
    .state('home', {
      url: 'home',
      templateUrl: 'home.html',
      controller: 'homeController',
      resolve: {
        ds: function ($wakandaManager) {
          return $wakandaManager.getCatalog();
        }
      }
    });
})
.controller('homeController', function($scope, ds) {
  //ds.Company.$query...
});

//OR

//Injecting $wakandaManager directly on a component
app.controller('myController', function ($scope, $wakandaManager) {
  $wakandaManager.getCatalog().then(function (ds) {
    //ds stands for dataStore, we will see it in the following examples
  });
});</code></pre>

<p>
  In this quickstart, we will directly inject <code>$wakandaManager</code> factory
  on the controller, because we only have one, on a single page. But for a real
  application, it is strongly advised to use a router with its resolver.
</p>

<h2>Retrieving data</h2>
<p>
  Let's start by adding a list of existing items on our todo list. Open
  <code>web/app/index.html</code>, remove code displaying Wakanda logo and add
  the following code on the <code>body</code> block.
  <br />
  Then, on the <code>web/app/scripts/app.js</code>, remove <code>myController</code>
  and add a <code>TodoController</code> that retrieves all items on the dataclass
  with <code>$all()</code> method.
</p>

<snippets path="documentation/snippets/quickstart/01/" files="['index.html', 'app.js']"></snippets>

<p>
  Several things here:
  <ul>
    <li>
      Angular-Wakanda needs to be initialized before using its API. That's why we need to
      embed our code in a callback called when <code>$wakandaManager.getCatalog()</code>
      promise is resolved. This method will retrieve the catalog and exposes
      the dataClasses of your data model on the <code>ds</code> object.
    </li>
    <li>
      All Angular-Wakanda methods that have an asynchronous treatment returns a <code>$promise</code> object containing
      a promise. Pass a callback function to <code>then()</code> method to execute code
      when the promise is resolved.
    </li>
  </ul>
  Launch the project by clicking on <em>Run page</em>, it will display <em>Number of
  tasks : 0</em>.
</p>

<h2>Creating data</h2>
<p>
  Now, we will add an input to add some new tasks on our todo list.
  On <code>web/app/index.html</code>, add an input and a submit button. We will
  attach an <code>addItem()</code> method to the submit action of the form.<br />
  On <code>web/app/scripts/app.js</code>, simply add the <code>addItem()</code> method
  to the scope.
</p>

<snippets path="documentation/snippets/quickstart/02/" files="['index.html', 'app.js']"></snippets>

<p>
  Good ! Our todo list is far better now as we can add new tasks on it.<br />
  To create a new entity, we call <code>$create()</code> method on the right dataClass.
  Once its parameters are set, simply call <code>$save()</code> on entity and it will be
  saved on server.
</p>

<h2>Updating data</h2>

<p>
  Updating data is really straightforward, edit some properties on an entity, then
  call <code>$save()</code> on it. And that's it.<br />
  We are going to illustrate this by marking a task as done (or todo if already done)
  by clicking on it.
</p>

<p>
  Add a <code>ng-click</code> action inside the <code>li</code> element. On our
  controller, action triggered by this click will inverse the boolean saying if an
  item is done or not.
</p>

<snippets path="documentation/snippets/quickstart/03/" files="['index.html', 'app.js']"></snippets>

<p>
  Like for entity creation, we use the <code>$save()</code> method on the entity
  to update it. No need to handle the promise returned here, as we do not have
  treatment to do after.
</p>

<h2>Removing data</h2>

<p>
  Removing an entity is as simple as saving one. Call <code>$remove()</code> method
  on it and it is done.<br />
  Let's add a little cross to delete an item of our todo list.
</p>

<snippets path="documentation/snippets/quickstart/04/" files="['index.html', 'app.js']"></snippets>

<h2>Conclusion</h2>

<p>You can find the full <code>index.html</code> and <code>app.js</code> files just below.</p>

<snippets path="documentation/snippets/quickstart/05/" files="['index.html', 'app.js']"></snippets>

<p>
  And we are done ! We saw in this quickstart how to initialize the Angular-Wakanda
  connector and how to use it to manipulate data in a simple way. There are a lot other methods
  to utilize all the power of Wakanda with your Angular application. Check the other docs !
</p>

<p>
  You can find the whole Wakanda solution on GitHub, on the <a href="https://github.com/Wakanda/wakanda-10-min-quickstart">Wakanda/10-min-quickstart</a>
  repository.
</p>

<doc-pagination page="{{currentPage}}" subpage="{{currentSubPage}}"></doc-pagination>
